import React from "react";
import SearchIcon from "../../icons/navbar/SearchIcon";
import {cva, VariantProps} from "class-variance-authority";

const textFieldVariant = cva("rounded-lg", {
    variants: {
        variant: {
            textField: [
                "bg-greyscale-100 text-greyscale-300 pl-4 py-2 text-ingredientName w-large rounded-lg shadow-cardShadow",
            ],
            textFieldFilters: [
                "bg-greyscale-100 text-greyscale-300 pl-4 py-2 text-ingredientName w-large rounded-lg shadow-cardShadow",
            ],
            searchbar: [
                "bg-greyscale-100 text-greyscale-300 pl-12 py-2 text-ingredientName w-large rounded-lg shadow-cardShadow",
            ],
            textFieldError: [
                "bg-greyscale-100 text-greyscale-300 pl-4 py-2 text-ingredientName w-large rounded-lg",
                "border border-state-error"
            ]
        },
    },
    defaultVariants: {
        variant: "textField",
    },
});

export interface TextFieldInterface extends React.HTMLProps<HTMLInputElement>, VariantProps<typeof textFieldVariant> {
    text: string,
}

const TextField = ({text="Text...", variant}: TextFieldInterface) => {

    const [isFocused, setIsFocused] = React.useState(false);

    const handleFocus = () => {
        setIsFocused(true);
    };

    const handleBlur = () => {
        setIsFocused(false);
    };

    return (
        <>
            <div>
                <div className="flex items-center">
                    <div className="absolute ml-3" style={variant === "searchbar" ? {} : {display: "none"}}>
                        <SearchIcon checked={isFocused} size={25} />
                    </div>
                    <input
                        className={textFieldVariant({variant})}
                        style={isFocused ? {border: "10px solid border-primary-500", outline: "none"} : {}}
                        type="text"
                        placeholder={text}
                        onFocus={handleFocus}
                        onBlur={handleBlur}
                    >
                    </input>
                    <button style={variant === "searchbar" || variant === "textFieldFilters" ? {marginLeft: '-2.5rem'} : {display: "none"}}>
                        <svg
                            className="margin-right-4"
                            width="20"
                            height="17"
                            viewBox="0 0 20 17"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path d="M13.3398 16.6309C12.9102 16.6309 12.5163 16.5234 12.1582 16.3086C11.8066 16.1003 11.5234 15.8171 11.3086 15.459C11.0938 15.1074 10.9863 14.7168 10.9863 14.2871C10.9863 13.8574 11.0938 13.4668 11.3086 13.1152C11.5234 12.7572 11.8066 12.474 12.1582 12.2656C12.5163 12.0508 12.9102 11.9434 13.3398 11.9434C13.7695 11.9434 14.1602 12.0508 14.5117 12.2656C14.8698 12.474 15.153 12.7572 15.3613 13.1152C15.5762 13.4668 15.6836 13.8574 15.6836 14.2871C15.6836 14.7168 15.5762 15.1074 15.3613 15.459C15.153 15.8171 14.8698 16.1003 14.5117 16.3086C14.1602 16.5234 13.7695 16.6309 13.3398 16.6309ZM13.3398 15.4297C13.6589 15.4297 13.929 15.319 14.1504 15.0977C14.3717 14.8763 14.4824 14.6061 14.4824 14.2871C14.4824 13.9616 14.3717 13.6914 14.1504 13.4766C13.929 13.2552 13.6589 13.1445 13.3398 13.1445C13.0208 13.1445 12.7507 13.2552 12.5293 13.4766C12.3079 13.6914 12.1973 13.9616 12.1973 14.2871C12.1973 14.6061 12.3079 14.8763 12.5293 15.0977C12.7507 15.319 13.0208 15.4297 13.3398 15.4297ZM11.7871 13.4961V15.0684H0.78125C0.566406 15.0684 0.380859 14.9935 0.224609 14.8438C0.0748698 14.6875 0 14.502 0 14.2871C0 14.0658 0.0748698 13.8802 0.224609 13.7305C0.380859 13.5742 0.566406 13.4961 0.78125 13.4961H11.7871ZM18.9258 13.4961C19.1276 13.4961 19.3034 13.5742 19.4531 13.7305C19.6029 13.8802 19.6777 14.0658 19.6777 14.2871C19.6777 14.502 19.6029 14.6875 19.4531 14.8438C19.3034 14.9935 19.1276 15.0684 18.9258 15.0684H15.0391V13.4961H18.9258ZM6.44531 10.6738C6.01562 10.6738 5.62174 10.5664 5.26367 10.3516C4.91211 10.1367 4.62891 9.85352 4.41406 9.50195C4.20573 9.14388 4.10156 8.75 4.10156 8.32031C4.10156 7.89062 4.20573 7.5 4.41406 7.14844C4.62891 6.79036 4.91211 6.50716 5.26367 6.29883C5.62174 6.08398 6.01562 5.97656 6.44531 5.97656C6.875 5.97656 7.26562 6.08398 7.61719 6.29883C7.97526 6.50716 8.25846 6.79036 8.4668 7.14844C8.68164 7.5 8.78906 7.89062 8.78906 8.32031C8.78906 8.75 8.68164 9.14388 8.4668 9.50195C8.25846 9.85352 7.97526 10.1367 7.61719 10.3516C7.26562 10.5664 6.875 10.6738 6.44531 10.6738ZM6.44531 9.46289C6.77083 9.46289 7.04102 9.35221 7.25586 9.13086C7.47721 8.9095 7.58789 8.63932 7.58789 8.32031C7.58789 7.99479 7.47721 7.72461 7.25586 7.50977C7.04102 7.28841 6.77083 7.17773 6.44531 7.17773C6.1263 7.17773 5.85612 7.28841 5.63477 7.50977C5.41341 7.72461 5.30273 7.99479 5.30273 8.32031C5.30273 8.63932 5.41341 8.9095 5.63477 9.13086C5.85612 9.35221 6.1263 9.46289 6.44531 9.46289ZM0.742188 7.5293H4.76562V9.10156H0.742188C0.546875 9.10156 0.374349 9.02669 0.224609 8.87695C0.0748698 8.72721 0 8.54167 0 8.32031C0 8.09896 0.0748698 7.91341 0.224609 7.76367C0.374349 7.60742 0.546875 7.5293 0.742188 7.5293ZM18.8867 7.5293C19.1081 7.5293 19.2936 7.60742 19.4434 7.76367C19.5996 7.91341 19.6777 8.09896 19.6777 8.32031C19.6777 8.54167 19.5996 8.72721 19.4434 8.87695C19.2936 9.02669 19.1081 9.10156 18.8867 9.10156H7.99805V7.5293H18.8867ZM13.3398 4.69727C12.9102 4.69727 12.5163 4.5931 12.1582 4.38477C11.8066 4.16992 11.5234 3.88672 11.3086 3.53516C11.0938 3.17708 10.9863 2.7832 10.9863 2.35352C10.9863 1.92383 11.0938 1.5332 11.3086 1.18164C11.5234 0.823568 11.8066 0.537109 12.1582 0.322266C12.5163 0.107422 12.9102 0 13.3398 0C13.7695 0 14.1602 0.107422 14.5117 0.322266C14.8698 0.537109 15.153 0.823568 15.3613 1.18164C15.5762 1.5332 15.6836 1.92383 15.6836 2.35352C15.6836 2.7832 15.5762 3.17708 15.3613 3.53516C15.153 3.88672 14.8698 4.16992 14.5117 4.38477C14.1602 4.5931 13.7695 4.69727 13.3398 4.69727ZM13.3398 3.49609C13.6589 3.49609 13.929 3.38542 14.1504 3.16406C14.3717 2.9362 14.4824 2.66276 14.4824 2.34375C14.4824 2.02474 14.3717 1.75456 14.1504 1.5332C13.929 1.31185 13.6589 1.20117 13.3398 1.20117C13.0208 1.20117 12.7507 1.31185 12.5293 1.5332C12.3079 1.75456 12.1973 2.02474 12.1973 2.34375C12.1973 2.66276 12.3079 2.9362 12.5293 3.16406C12.7507 3.38542 13.0208 3.49609 13.3398 3.49609ZM11.8359 1.57227V3.14453H0.78125C0.566406 3.14453 0.380859 3.06966 0.224609 2.91992C0.0748698 2.76367 0 2.57487 0 2.35352C0 2.13867 0.0748698 1.95638 0.224609 1.80664C0.380859 1.65039 0.566406 1.57227 0.78125 1.57227H11.8359ZM18.9258 1.57227C19.1276 1.57227 19.3034 1.65039 19.4531 1.80664C19.6029 1.95638 19.6777 2.13867 19.6777 2.35352C19.6777 2.57487 19.6029 2.76367 19.4531 2.91992C19.3034 3.06966 19.1276 3.14453 18.9258 3.14453H14.9023V1.57227H18.9258Z" fill="#549E83"/>
                        </svg>
                    </button>
                </div>
                <div className="absolute ml-2 text-state-error" style={variant === "textFieldError" ? {} : {display: "none"}}>
                    Error
                </div>
            </div>
        </>
    );
}

export default TextField;